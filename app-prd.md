# 有害生物防制小程序产品需求文档

## 产品概述
有害生物防制小程序是一款面向专业有害生物防治服务提供商的工作管理工具，旨在帮助企业管理施工项目、记录施工过程、提供培训内容，并实现多角色协作的工作流程。

## 用户角色与交互逻辑

### 1. 游客(guest)
- **可访问页面**：培训中心、个人中心
- **主要功能**：
  - 浏览培训内容
  - 登录/注册
  - 选择角色（施工员或客户）

### 2. 施工员(worker)
- **可访问页面**：工作台、项目管理、施工记录、个人中心
- **主要功能**：
  - 查看分配的项目列表和今日任务
  - 创建施工记录
  - 上传施工照片
  - 生成和下载施工报告
  - 查看培训内容
  - 管理个人信息

### 3. 客户(client)
- **可访问页面**：首页、施工记录、报告、个人中心
- **主要功能**：
  - 查看项目进度和统计数据
  - 查看施工记录
  - 下载施工报告
  - 管理个人信息

### 4. 管理员(admin)
- **可访问页面**：工作台、客户管理、项目管理、报告、个人中心
- **主要功能**：
  - 管理所有项目数据
  - 管理所有施工记录数据
  - 管理客户信息
  - 创建和管理项目
  - 查看所有施工记录和报告
  - 需要验证码登录，权限更高

**注**：用户权限管理和系统设置功能在管理端的若依管理系统中完成，不在小程序内实现。

## 主要页面功能点

### 1. 登录与角色选择
- **登录页(login/index)**：支持微信登录
- **角色选择页(role-select/index)**：新用户选择角色（施工员或客户、管理员）

### 2. 工作台
- **施工员工作台(worker/index)**：
  - 显示项目统计数据（总数、待施工、施工中、已完成）
  - 显示今日任务列表
  - 显示已分配项目
  - 快速开始施工记录
  
- **管理员工作台(admin/index)**：
  - 系统概览数据
  - 管理快捷入口

### 3. 项目管理
- **项目列表(project/index)**：
  - 显示所有项目及其状态
  - 项目进度百分比显示
  
- **项目详情(project/detail/index)**：
  - 显示项目基本信息
  - 显示相关施工记录
  - 创建新施工记录
  - 编辑/完成/删除项目
  
- **项目创建/编辑(project/create/index, project/edit/index)**：
  - 填写项目基本信息
  - 选择客户
  - 设置项目时间

### 4. 施工记录
- **创建/编辑记录(work/record/index)**：
  - 选择日期、施工内容
  - 选择使用的药剂、器械、施工区域
  - 上传施工照片
  - 提交施工记录
  
- **记录详情(work/detail/index)**：
  - 查看施工记录详情
  - 预览施工照片
  - 编辑/删除记录
  - 生成施工报告
  - 下载报告
  - 分享记录

### 5. 报告管理
- **报告页面(work/report/index)**：
  - 报告列表视图：筛选和查看所有报告
  - 报告详情视图：查看单个报告详情
  - 生成PDF报告
  - 下载PDF报告

### 6. 客户管理
- **客户列表(client/index)**：
  - 显示所有客户
  - 搜索和筛选客户
  
- **客户详情(client/detail/index)**：
  - 显示客户基本信息
  - 显示客户相关项目
  
- **客户创建/编辑(client/create/index, client/edit/index)**：
  - 填写客户基本信息
  - 设置联系人和联系方式

### 7. 培训中心
- **培训列表(training/index)**：
  - 按分类浏览培训内容（技术指南、操作规范、安全知识）
  
- **培训详情(training/detail/index)**：
  - 查看培训内容详情
  - 观看培训视频
  - 查看培训图文

### 8. 个人中心
- **用户信息(user/index)**：
  - 显示用户基本信息
  - 查看施工记录

## 整体评估

基于对代码的分析，这个小程序的功能和交互逻辑主要围绕有害生物防制服务展开，支持以下核心业务流程：

1. **施工管理**：项目创建、施工记录、报告生成
2. **客户服务**：查看施工进度、下载报告
3. **培训学习**：浏览培训内容，提升专业技能

系统的用户角色划分清晰，功能模块相对完整，页面之间的跳转逻辑合理。代码优化（合并重复页面）也提高了系统的维护性。

这个小程序适合用于有害生物防制服务公司管理施工记录、生成报告，以及与客户进行信息共享。
